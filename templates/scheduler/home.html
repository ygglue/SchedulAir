{% extends 'scheduler/base.html' %} {% block title %}
Home
{% endblock %}

{% block content %}
<section class="container home-shell">
  <div class="row g-4 justify-content-center">
    {% if time_remaining != '' %}
    <div class="col-12 col-lg-5">
      <article class="dashboard-card class-card shadow-xxl h-100">
        <div class="card-label">Current Class</div>
        <div class="class-card-body">
          <div class="class-time">
            <span class="class-time-range">{{current_class.start_time|time:"g:i A"}} –
              {{current_class.end_time|time:"g:i A"}}</span>
          </div>
          <h1 class="class-title">{{current_class.subject.name}}</h1>
          <div class="class-meta">
            <div class="class-meta-item">
              <i class="bi bi-person-fill"></i>
              <span>{{current_class.subject.teacher}}</span>
            </div>
          </div>
        </div>
        <div class="class-status">
          <span class="status-indicator"></span>
          In progress — {{time_remaining}} minutes remaining
        </div>
      </article>
    </div>
    {% endif %}
    <div class="col-12 col-lg-7">
      <article class="dashboard-card weather-board shadow-xxl h-100">
        <div class="weather-main">
          <div>
            <p class="weather-region text-uppercase mb-2">{{city_displayname1}}</p>
            <p class="weather-region text-uppercase mb-2">{{city_displayname2}}</p>
            <div class="d-flex align-items-center gap-3">
              <h2 class="weather-temp mb-0">{{temperature}}°</h2>
              <div class="weather-condition">
                <span class="condition-range">Max {{max_temperature}}°</span>
                <span class="condition-label">‎</span>
                <span class="condition-range">Min {{min_temperature}}°</span>
              </div>
            </div>
            <p class="weather-today mb-0">Feels like {{apparent_temperature}}° · Wind speed is at {{windspeed}} km/h</p>
          </div>
          <div class="weather-illustration">
            {% if weather_code == 0 %}
            {# Clear sky #}
            {% if is_day %}
            <span class="weather-sun"></span>
            {% else %}
            <span class="weather-moon"></span>
            <span class="weather-stars star-1"></span>
            <span class="weather-stars star-2"></span>
            <span class="weather-stars star-3"></span>
            <span class="weather-stars star-4"></span>
            {% endif %}
            {% elif weather_code == 1 %}
            {# Mainly clear #}
            {% if is_day %}
            <span class="weather-sun"></span>
            {% else %}
            <span class="weather-moon"></span>
            {% endif %}
            <span class="weather-cloud-small"></span>
            {% elif weather_code == 2 %}
            {# Partly cloudy #}
            <span class="weather-cloud"></span>
            {% elif weather_code == 3 %}
            {# Overcast #}
            <span class="weather-cloud-large"></span>
            {% elif weather_code == 45 or weather_code == 48 %}
            {# Fog #}
            <span class="weather-mist"></span>
            {% elif weather_code >= 51 and weather_code <= 67 or weather_code >= 80 and weather_code <= 82 %}
            {# Rain / Drizzle #}
            {% if weather_code <= 55 %}
            {# Light rain/drizzle: show sun/moon #}
            {% if is_day %}
            <span class="weather-sun"></span>
            {% else %}
            <span class="weather-moon"></span>
            {% endif %}
            {% endif %}
            <span class="weather-cloud"></span>
            <span class="weather-rain rain-1"></span>
            <span class="weather-rain rain-2"></span>
            <span class="weather-rain rain-3"></span>
            {% elif weather_code >= 71 and weather_code <= 86 %}
            {# Snow #}
            <span class="weather-cloud"></span>
            <span class="weather-snow snow-1"></span>
            <span class="weather-snow snow-2"></span>
            <span class="weather-snow snow-3"></span>
            <span class="weather-snow snow-4"></span>
            <span class="weather-snow snow-5"></span>
            {% elif weather_code >= 95 %}
            {# Thunderstorm #}
            <span class="weather-cloud-large"></span>
            <span class="weather-lightning"></span>
            <span class="weather-rain rain-1"></span>
            <span class="weather-rain rain-2"></span>
            <span class="weather-rain rain-3"></span>
            {% else %}
            {# Fallback #}
            <span class="weather-cloud"></span>
            {% endif %}
          </div>
        </div>
        <div class="weather-meta">
          <div class="meta-card">
            <span class="meta-label">Humidity</span>
            <span class="meta-value">{{humidity}}%</span>
          </div>
          <div class="meta-card">
            <span class="meta-label">Dew Point</span>
            <span class="meta-value">{{dew_point}}</span>
          </div>
          <div class="meta-card meta-card-precipitation">
            <span class="meta-label">Precipitation</span>
            <div class="precipitation-split">
              <div class="precipitation-item">
                <span class="meta-subtext">Probability</span>
                <span class="meta-value">{{precipitation_probability}}%</span>
              </div>
              <div class="precipitation-divider"></div>
              <div class="precipitation-item">
                <span class="meta-subtext">Sum</span>
                <span class="meta-value">{{precipitation_sum}}mm</span>
              </div>
            </div>
          </div>
        </div>
      </article>
    </div>
  </div>
</section>
{% endblock %}